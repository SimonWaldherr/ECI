<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>External Code Interface (ECI): ECI Macros</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">External Code Interface (ECI)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ECI Macros </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page details macros intended to be defined in 'eci_interface.h' or any file in the include tree. Each macro specifies whether it is required for operation of the ECI. Failure to specify a macro will lead to a compilation error. These macros serve as a means to define the behavior of the ECI.</p>
<h1><a class="anchor" id="func_macros"></a>
Function Macros</h1>
<table class="doxtable">
<tr>
<th>Required </th><th>Macro </th><th>Description </th></tr>
<tr>
<td style="text-align:center"> &check; </td><td>ECI_APP_MAIN </td><td>Name of the main function. Serves as an entry point for the ECI. </td></tr>
<tr>
<td style="text-align:center"> &cross; </td><td>ECI_FUNC_CODE_START </td><td>?? </td></tr>
<tr>
<td style="text-align:center"> &cross; </td><td>ECI_FUNC_CODE_END </td><td>?? </td></tr>
</table>
<h1><a class="anchor" id="info_macros"></a>
Information Macros</h1>
<table class="doxtable">
<tr>
<th>Required </th><th>Macro </th><th>Description </th></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_APP_REVISION_NUMBER </td><td>Version number to be used in event messages. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_APP_NAME_UPPER </td><td>Name of the app in upper case. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_APP_NAME_LOWER </td><td>Name of the app in lower case. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_CMD_PIPE_NAME </td><td>Name of the app's command pipe. The command pipe is used to receive software bus command messages. <br/>
This value must be unique across all apps. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_DATA_PIPE_NAME </td><td>Name of the app's telemetry pipe. <br/>
This value must be unique across all apps. </td></tr>
</table>
<h1><a class="anchor" id="tbl_macros"></a>
Table Macros</h1>
<table class="doxtable">
<tr>
<th>Required </th><th>Macro </th><th>Description </th></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_PARAM_TBL_DEFINED </td><td>Indicates the app requires a flight software parameter table. <br/>
 If this is defined, ECI will expect an array of <a class="el" href="struct_e_c_i___tbl__t.html">ECI_Tbl_t</a> objects with the name <br/>
 'ECI_ParamTable' to be declared. </td></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_STATE_TBL_DEFINED </td><td>Indicates the app is intending to use a state table. <br/>
 Declaring this macro also requires defining: <table class="doxtable">
<tr>
<th>Macro </th><th>Description </th></tr>
<tr>
<td>ECI_STATE_TABLE_NAME </td><td>Name of the registered state table. </td></tr>
<tr>
<td>ECI_STATE_TABLE </td><td>Name of the declared structure in the associated .tbl file. </td></tr>
</table>
</td></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_CDS_TABLE_DEFINED </td><td>Indicates this app uses the critical data store. </td></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_EVENT_TABLE_DEFINED </td><td>Indicates this app wishes to output events to CFE event services. <br/>
 If this is defined, ECI will expect an array of <a class="el" href="struct_e_c_i___evs__t.html">ECI_Evs_t</a> objects with the name <br/>
 'ECI_Events' to be declared. </td></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_FLAG_TABLE_DEFINED </td><td>Indicates this app wants to trigger FDC messages. <br/>
 If this is defined, ECI will expect an array of <a class="el" href="struct_e_c_i___flag__t.html">ECI_Flag_t</a> objects with the name <br/>
 'ECI_Flags' to be defined. </td></tr>
</table>
<h1><a class="anchor" id="mid_macros"></a>
Message ID Macros</h1>
<p>Each one of these message IDs are unique across all apps including the CFE core and extra care should be taken to avoid collisions. A message ID collision is difficult to diagnose but can usually be found by strange commands or telemetry being relayed to event services.</p>
<p>According to the CCSDS standard, message IDs should be represented by 8 byte integers. Commonly these IDs are written as hex values (ie. 0xAAAA) even though any value that fits within those 8 bytes will be valid. The 4th bit (0b...[0|1]) represents the type of message the ID is associated with; 0 being telemetry and 1 being a command. In the table below, we've identified each macro's internal type with either TLM or CMD accordingly. ECI expects that every MID that uses the command bit requires an additional buffer to store the incoming command. A third distinction will be made in this table for performance IDs which will be denoted by PERF. Performance IDs are used to track an apps system usage but aren't reference in the CCSDS standard. The CCSDS standard can be referenced <a href="https://public.ccsds.org/Pubs/133x0b1c2.pdf">here</a>.</p>
<table class="doxtable">
<tr>
<th>Required </th><th>Macro </th><th>Type </th><th>Description </th></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_CMD_MID </td><td style="text-align:center">CMD </td><td>Standard command message ID. This command ID is used for NOOP and the house keeping command. </td></tr>
<tr>
<td style="text-align:center"> &cross;</td><td>ECI_FLAG_MID </td><td style="text-align:center">TLM </td><td>Used by FDC to retrieve an apps flags to which the ECI will respond with the state of the registered flags. Only required if ECI_FLAG_TABLE_DEFINED is defined. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_HK_MID </td><td style="text-align:center">TLM </td><td>ID indicating the app's house keeping message. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_PERF_ID </td><td style="text-align:center">PERF </td><td>ID to track the performance of the app. This ID will be used before and after the run loop once the ECI recieves the app's tick message. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_SEND_HK_MID </td><td style="text-align:center">TLM </td><td>Opens a channel for hk to request new house keeping information. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_TICK_MID </td><td style="text-align:center">TLM </td><td>Allows the ECI to trigger an iteration of the run loop. This message will usually come from the scheduler or a data source. If your app is not running, check to see if this message has been included in your scheduler app. </td></tr>
<tr>
<td style="text-align:center"> &check;</td><td>ECI_TBL_MANAGE_MID </td><td style="text-align:center">TLM </td><td>Alerts the ECI to changes in table services. This message ID will trigger a table load and update all state/param information accordingly. </td></tr>
</table>
</div></div><!-- contents -->
