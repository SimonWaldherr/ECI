<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>External Code Interface (ECI): Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">External Code Interface (ECI)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Background"></a>
Background</h1>
<p>The External Code Interface (ECI) is an application framework for the Core Slight System (CFS) environment.</p>
<p>According to <a href="https://cfs.gsfc.nasa.gov/:">https://cfs.gsfc.nasa.gov/:</a></p>
<blockquote class="doxtable">
<p>The core Flight System (cFS) is a platform and project independent reusable software framework and set of reusable software applications. There are three key aspects to the cFS architecture:</p>
<ul>
<li>a dynamic run-time environment,</li>
<li>layered software, and</li>
<li>a component based design.</li>
</ul>
<p>It is the combination of these key aspects that makes it suitable for reuse on any number of NASA flight projects and/or embedded software systems at a significant cost savings.</p>
<p></p>
</blockquote>
<h1><a class="anchor" id="sec_purpose"></a>
Use cases for ECI:</h1>
<p>ECI's primarily purpose is to provide a mechanism for executing code which was not writen as a CFS application (called external code) within a CFS environment. The CFE provides a robust API for managing an app's execution and provides a number of services commonly required in a flight software context to its apps, including:</p>
<ul>
<li>message passing,</li>
<li>parameter management,</li>
<li>and time management, amongst others.</li>
</ul>
<p>Code missing these API calls is unable to function in a CFS environment and the ECI addresses the fact that there are several cases in which it may be impractical for a piece of code to utilize these CFE APIs. These situations include (but are not limited to):</p>
<ul>
<li>Autogenerated Code, whose generator may be difficult to modify/customize to produce the required API calls</li>
<li>Legacy Code, which may be undesirable to modify on the basis of maintaining heritage or compatibility with existing systems</li>
<li>Complex algorithms, which may be made more complex by the additions of the CFE APIs within the code</li>
</ul>
<p>The core of the ECI is a generic CFS application whose interfaces are configured by a user-provided interface definition, which controls how an instantiation of an ECI app manages its CFS interfaces. Depending on the architecture of the external code, the ECI can typically manage the CFS interfaces with no (or minimal) changes to the external code.</p>
<p>The ECI also strives to be concious of resource limitations of embedded applications and so provides compile-time mechanism to only enable needed functionality.</p>
<h1><a class="anchor" id="sec_heritage"></a>
ECI Heritage:</h1>
<p>The ECI started as a subcomponent of another tool, the <a href="https://github.com/nasa/SIL">Simulink Interface Layer (SIL)</a>, which aimed to smooth the process of generating code from Simulink models and integrating that code into a CFS environment. The SIL contained two parts:</p>
<ul>
<li>a code generation target which extended the code generation pipeline to additionally generate a definition of the code's interfaces</li>
<li>and a framework which used that interface definition to setup and execute that code as a CFS app</li>
</ul>
<p>The first component continues to be called the SIL, but the second component is now called the ECI.</p>
<p>The SIL/ECI has/is being used on a several NASA missions including LADEE, NICER, GEDI, and PACE and is actively maintained to meet the requirements of those missions and to stay current with ongoing development of the cFE/cFS.</p>
<h1><a class="anchor" id="sec_howto"></a>
How to Read This Documentation:</h1>
<p>These docs are intended to provide enough information for a new user to define and integrate an app using the ECI. The documentation itself takes a couple of forms:</p>
<ul>
<li>standard docs (such as this one) describing parts of the framework and workflow</li>
<li>several examples, which are buildable and runnable</li>
<li>a continuous integration pipeline which can be used as a recipie</li>
</ul>
<p>For new users, its highly recommended that you become familiar with the CFS app paradigm and app organization, as the ECI documentation is focused on documenting how ECI changes/fits in with those concepts and not providing a comprehensive guide to those topics. From there, we recommend examining the examples to gain a better understanding on the setup of an ECI app and the CI pipeline as a command-by-command guide for building the examples.</p>
<h1><a class="anchor" id="sec_requirements"></a>
ECI Integration Requirements:</h1>
<p>Due to its implementation, external code must have certain properties for it to be compatible with the ECI architecture. These properties can be broken into several categories, listed below:</p>
<ul>
<li>Calling:<ul>
<li>External code must provide a single “Step” function to be called each execution of the app</li>
<li>External code may optionally also provide an initialization function and a termination function to implement setup/teardown</li>
<li>Step/Init/Term functions must not take any arguments (void/void interface)</li>
</ul>
</li>
<li>I/O:<ul>
<li>Each message (input or output) must be a contiguous region of memory</li>
<li>Each message structure must have global scope in the external code (so that the ECI can interact with it)</li>
</ul>
</li>
<li>Parameters:<ul>
<li>Each parameter table must be a contiguous region of memory</li>
<li>Each parameter structure must have global scope in the external code (so that the ECI can interact with it)</li>
</ul>
</li>
<li>All interfaces must be declared at compilation (can’t register new messages/events/etc at runtime)</li>
</ul>
<p>For pieces of code which do not adhere to these restrictions, the author might consider writting a think wrapper such that the interface exposed to the ECI is compliant. An example of a wrapper implementation is available in the examples.</p>
<h1><a class="anchor" id="sec_components"></a>
Main Components of the ECI:</h1>
<p>Given the prevalence of the C language in embedded programming and the cFE, the ECI is designed to be compatible with typical C constructs/workflows. The ECI's interface to the external code takes the form of a header file named <code>eci_interface.h</code>, which is ideally written by a software developer knowledgeable with the target external code. This interface header is compiled together with the ECI source code (which is fully generic) to create the CFS application.</p>
<p>You can find the specification governing the contents of the interface header file in Interface_Spec.md, more details on writing this interface header <a class="el" href="creating_eci_interface.html">here</a>, or two examples of these header files in the <code>/examples</code> directory in the repository.</p>
<h1><a class="anchor" id="sec_features"></a>
Supported Features:</h1>
<p>The ECI was designed to support most core CFE features such as:</p>
<ul>
<li>initialization, execution, and termination of application</li>
<li>input/output message management with CFE Software Bus (SB)</li>
<li>table management with CFE Table Services (TS)</li>
<li>housekeeping counter management</li>
<li>event services registration and event triggering</li>
<li>Critical Data Store (CDS) nonvolatile storage of data</li>
</ul>
<p>For a more in depth explanation of the inner workings of ECI, we've created several diagrams indicating the order of events <a class="el" href="diagrams.html">here</a>.</p>
<h1><a class="anchor" id="quick_start"></a>
Quick Start:</h1>
<p>For people interested in getting their feet wet with the ECI, we've provided a quick start section that covers building ECI apps with both the CFE 6.5 and 6.6 <a class="el" href="example_build.html">here</a>. This was intended as a quick introduction and avoids the implementation details of integrating an ECI app.</p>
<h1><a class="anchor" id="sec_change_requests"></a>
Change Requests and Community Involvement:</h1>
<p>ECI is first and foremost a framework designed to support the integration of flight software for NASA missions. Those missions have been and will continue to be the primary drivers of the ECI requirements. That being said, we think there's value in the workflow developed here, as an alternative to traditional app development, and welcomes community involvement. ECI devs plan to be receptive towards issues posted on the official ECI repository on GitHub, provided they don't conflict with internally-generated requirements and pending developer availability.</p>
<p>If you find yourself having trouble with something that hasn't been provided in this documentation, find a problem with the code, or would like to suggest/contribute a feature, please consider opening an issue. The development team for ECI is relatively small and issue-based feedback helps identify, communicate, and allow us to prioritize development and maintenence of the ECI. </p>
</div></div><!-- contents -->
